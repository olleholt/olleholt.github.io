{
  "hash": "e4a36fffe56b515abc166847cf03578a",
  "result": {
    "engine": "knitr",
    "markdown": "---\n# ~ additional YAML options omitted for brevity ~\ntitle: \"Data Vizualization\"\nauthor: \"Olivia Holt\"\ndata: 03-12-2024\nformat:\n  html:\n    embed-resources: true\n    code-fold: true\n    code-summary: \"Show the code\"\n---\n\n\n\n# Data\n\nFrom Kaggle:\n\n<https://www.kaggle.com/datasets/mikeshout/14erpeaks/data>\n\n### **Context**\n\nThis tidy dataset lists mountain peaks rising to an elevation greater than 14,000 ft (4,267 meters) located in the state of Colorado, USA.\n\nA fourteener is a mountain peak with an elevation greater than 14,000 feet and a significant prominence. The prominence has to be at least 300 feet higher than the saddle connecting it to a neighboring peak.\n\nIn Colorado, and in this dataset, there are 58 peaks over 14,000 feet. Although five of those peaks do not meet the prominence rule but are included in this dataset.\n\n**Parameters of interest:**\n\n-   **Traffic High** – The high range of estimated visits in the year 2017\n\n-   **Lat** -The latitudinal coordinate in decimal form\n\n-   **Long** - The longitudinal coordinate in decimal form\n\n-   **Mountain Peak** – The name of the peak\n\n-   **Elevation Gain_ft** – The elevation gain of the standard route in feet\n\n-   **Difficulty** – The Yosemite Decimal System difficulty rating, a value ranging from Class 1 (easiest), Class 2, Easy Class 3, Class 3, Hard Class3, to Class 4 (most difficult)\n\n-   **Prominence_ft** – How much higher the peak is in feet from the next highest point\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n##| warning: false\n##| error: false\n\n##| eval: true\n##| echo: false\n##| fig-align: \"center\"\n##| out-width: \"100%\"\n##| fig-alt: \"Alt text here\"\n#knitr::include_graphics(here::here(\"Colorado14nerPopularity.png\"))\n```\n:::\n\n\n\n# Load Libraries\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load in libraries ----\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(maps)\nlibrary(plotly)\nlibrary(kableExtra)\nlibrary(paletteer)\nlibrary(maps)\nlibrary(mapdata)\nlibrary(ggmap)\nlibrary(osmdata)\nlibrary(grid)\nlibrary(viridis)\nlibrary(ggtern)\n```\n:::\n\n\n\n# Load in Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_wd <- \"/Users/oliviaholt/Documents/olleholt.github.io/Projects/Data_Viz_14ners/Untitled\"\n# import data ----\nfourteener_data <- read_csv(file.path(data_wd, \"14er.csv\"), show_col_types = FALSE)\n```\n:::\n\n\n\n# Clean Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# clean data names----\nfourteener_clean <- fourteener_data %>% \n  clean_names()\n\n# I want the difficulty class to be a value from 1 to 6 which I will change here\nfourteener_clean <- fourteener_clean %>%\n  mutate(\n    new_difficulty = case_when(\n      difficulty == \"Class 1\" ~ 1,\n      difficulty == \"Class 2\" ~ 2,\n      difficulty == \"Hard Class 2\" ~ 3,\n      difficulty == \"Easy Class 3\" ~ 4,\n      difficulty == \"Class 3\" | difficulty == \"Hard Class 3\" ~ 5,\n      difficulty == \"Class 4\" ~ 6,\n      TRUE ~ 20\n    )\n  )\n\n# I also want to arrange by descending order for taffic_high for viewing purposes\nfourteener_clean <- fourteener_clean %>% arrange(traffic_high)\n\n#grabbign the 20 most visited peaks into a subset\nfourteener_20 <- fourteener_clean %>% \n  tail(20)\n```\n:::\n\n\n\n# Bar Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#use subset of top 20 most visited peaks\ncol_plot <- fourteener_clean %>%\n  tail(20) %>% \n  ggplot() +\n  geom_col(aes(y = reorder(mountain_peak, traffic_high), #change into ascending order for mountain peak by traffic\n               x = traffic_high, fill = difficulty))+\n  xlab(\"Popularity by Traffic Estimate\") +\n  ylab(\"\")+ #empty ylabel\n  ggtitle(\" \")+ #empty title\n  #get rid of grey background and fill with white\n  theme(panel.background = element_rect(fill = \"white\"),\n        #creating horizontal axis grid lines\n        panel.grid.major.x = element_line(color = \"#A8BAC4\", size = 0.3),\n        # Only left line of the vertical axis is painted in black\n        axis.line.y.left = element_line(color = \"black\"),\n        # increase font size for x and y-axis labels\n        axis.text.x = element_text(size = 12, family = \"Arial\"),\n        axis.text.y = element_text(size = 12, family = \"Arial\"),\n        axis.title.x = element_text(size = 14,family = \"Arial\"))+\n  scale_fill_paletteer_d(\"nationalparkcolors::CraterLake\")+\n  labs(fill = \"Difficulty Level\")  # Change the legend title here\n\ncol_plot\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#ggsave(\"col_plot.png\", plot = col_plot, device = \"png\", width = 8, height = 6)\n```\n:::\n\n\n\n# Ternary Plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#showing all 58 14ner's color coded by difficulty\n\n# Create a ternary plot with specified axis limits\ntern_plot_0 <- ggtern(data = fourteener_clean, \n                       aes(x = traffic_high,\n                           y = elevation_gain_ft,\n                           z = prominence_ft,\n                           fill = difficulty)) +#fill color by difficulty\n  \n  # Adding points to the plot with adjustements to transparancy, shape, color, size\n  geom_point(alpha = 0.5, shape = 21, color = \"black\", size = 4) +\n  \n  # Apply a theme to the plot\n  theme_bvbw(base_size = 12) +\n  \n  # Adjust the legend position\n  theme(legend.position = \"bottom\",axis.title = element_text(size = 9)) +\n  \n  # Labeling the axes\n  ylab(\"Elevation Gain (ft)\") +\n  xlab(\"Traffic\") +\n  zlab(\"Prominence\") +\n  \n  # Setting the title of the plot as empty\n  labs(title = \" \")+\n  \n   # Customizing the legend title and appearance\n   guides(fill = guide_legend(title = \"Difficulty Level\")) + #legend title\n   theme(legend.key = element_rect(fill = \"white\", color = \"white\"), #background color\n         legend.title = element_text(size = 10))+  # customizing legend box color\n   #Customize the legend title and appearance\n  \n  # Use scale_fill_manual to set custom colors for each difficulty level\n  #based off of the CraterLake color palette colors\n  scale_fill_manual(values = c(\"Class 1\" = \"#7DCCD3FF\", \"Class 2\" = \"#4E7147FF\", \n                               \"Easy Class 3\" = \"#BE9C9DFF\", \"Class 3\" = \"#F7ECD8FF\",\n                               \"Hard Class 3\" = \"#376597FF\", \"Class 4\" = \"#9888A5FF\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# a subset plot to only look at the 20 most popular 14ner in 2017\n# Creating a ternary plot\ntern_plot <- ggtern(data = fourteener_20, \n                       aes(x = traffic_high,\n                           y = elevation_gain_ft,\n                           z = prominence_ft,\n                           fill = difficulty)) +\n  \n  # Add points to the plot with specified attributes\n  geom_point(alpha = 0.8, shape = 21, color = \"black\", size = 4) +\n  \n  # Apply a theme to the plot\n  theme_bvbw(base_size = 12) +\n  \n  # Adjust the legend position\n  theme(legend.position = \"bottom\",axis.title = element_text(size = 9)) +\n  \n  # Label the axes\n  ylab(\"Elevation Gain (ft)\") +\n  xlab(\"Traffic\") +\n  zlab(\"Prominence\") +\n  \n  # Set the title of the plot as empty\n  labs(title = \" \")+\n  \n   # Customize the legend title and appearance\n   guides(fill = guide_legend(title = \"Difficulty Level\")) +\n   theme(legend.key = element_rect(fill = \"white\", color = \"white\"),\n         legend.title = element_text(size = 10))+  # customizing legend box color\n   #Customize the legend title and appearance\n  \n  # Using scale_fill_manual to set custom colors for each difficulty level\n  scale_fill_manual(values = c(\"Class 1\" = \"#7DCCD3FF\", \"Class 2\" = \"#4E7147FF\", \n                               \"Easy Class 3\" = \"#BE9C9DFF\", \"Class 3\" = \"#F7ECD8FF\",\n                               \"Hard Class 3\" = \"#376597FF\", \"Class 4\" = \"#9888A5FF\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Add points to show where the other 38 fourteeners are\n#focus on most popular 20\ntern_plot_2 <- tern_plot +\n  geom_point(data = fourteener_clean, alpha = 0.5, shape = 1, color = \"black\", size = 4, family = \"Arial\") # changing transparancy, shape, color, size and font\n\ntern_plot_2 #printing plot\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"tern_plot_2.png\", plot = tern_plot_2, device = \"png\", width = 8, height = 6)\n```\n:::\n\n\n\n# **Map**\n\nNote: I used the OSM package to plot major highways but could not render with it. Therefore I left it commented out because I still used it in the infographic.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load United States state map data from map_data package\nMainStates <- map_data(\"state\")\nst_CO <- MainStates %>% \n  filter(region == \"colorado\")\n\n# #using the OSM package to view the main roads in colorado\n# big_streets <- getbb(\"Colorado United States\")%>%\n#   opq()%>%\n#   add_osm_feature(key = \"highway\", \n#                   value = c(\"motorway\", \"primary\", \"motorway_link\", \"primary_link\")) %>%\n#   osmdata_sf()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter the mt. bierstadt in the dataset (most visited)\nmt_bierstadt <- tail(fourteener_20, 1)\n\nmap_plot_2 <- ggplot() + \n  geom_polygon(data = st_CO, aes(x = long, y = lat, group = group),\n               color = \"black\", fill = \"white\") +\n  #geom_sf(data = big_streets$osm_lines, color = \"black\", alpha = 0.25) +\n  geom_point(data = fourteener_20,\n             aes(x = long, y = lat, fill = difficulty),\n             alpha = 0.8, shape = 24, color = \"black\", size = 5) +\n  geom_label(data = mt_bierstadt,\n             aes(x = long + 0.1, y = lat + 0.1, label = mountain_peak),#labeling the Mt. Bierstadt\n             vjust = 1.5, size = 3, color = \"black\",\n             label.padding = unit(0.15, \"lines\"),  # Adjust label padding\n             label.r = unit(0.15, \"lines\"),         # Adjust label radius\n             label.size = 0.25,#adjusting label size\n             nudge_x = 2.5,  # Nudging the labels to the right\n             nudge_y = -1) +  # Nudging the labels up\n  geom_segment(data = mt_bierstadt,\n               aes(x = long, y = lat, xend = long + 2.5, yend = lat + -1),# adjusting the location of the text box label for Mt. Biestadt\n               color = \"black\", size = 0.5, alpha = 1, lineend = \"round\") +  # Adding connecting line to mt bierstadt\n  scale_fill_paletteer_d(\"nationalparkcolors::CraterLake\", name = \"Difficulty Level\") +\n  labs(title = \"\") +  # Empty title\n  theme(axis.title.x = element_blank(),  # Remove x-axis title\n        axis.title.y = element_blank(),  # Remove y-axis title\n        axis.text.x = element_blank(),   # Remove x-axis labels\n        axis.text.y = element_blank(),   # Remove y-axis labels\n        axis.ticks.x = element_blank(),   # Remove x-axis ticks\n        axis.ticks.y = element_blank())+   # Remove y-axis ticks\n  theme_void()# changing theme to void\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Coordinates for Denver\ndenver_lat <- 39.742043\ndenver_long <- -104.991531\n\n# Add Denver point to the plot with a specific color\nmap_plot_den <- map_plot_2 +\n  geom_point(data = data.frame(lon = denver_long, lat = denver_lat), \n             aes(x = lon, y = lat, color = \"Denver\"), size = 2) +\n  scale_color_manual(values = \"red\", name = \"City\") #Using a red dot to pinpoint Denver\n\n# Print the plot\nmap_plot_den\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#ggsave(\"map_plot_den.png\", plot = map_plot_den, device = \"png\", width = 8, height = 6)\n```\n:::\n\n\n\n# Write Up\n\nMy question is 'What makes a fourteener (14ner) the most popular’? With this dataset in particular I am looking at elevation gain of the hike in feet, high traffic estimates for 2017, difficulty level of the hike, and the individual peaks. The dataset has average values for the entire year of 2017. The difficulty levels range from Class 1, Class 2, Easy Class 3, Class 3, Hard Class 3, and Class 4.\n\nThis tidy dataset is from Kaggle and it lists mountain peaks rising to an elevation greater than 14,000 ft (otherwise known as a fourteener) located in Colorado. Other than being 14,000 ft tall to be a 14ner, the prominence of the peak has to be at least 300 feet higher than the saddle that is connecting it to a neighboring peak. There are 58 peaks over 14,000 feet in Colorado and five of those peaks do not meet the prominence rule, but are included in this dataset. The dataset did not need much cleaning and wrangling except for some subsetting, arranging, and renaming.\n\nInitially, I anticipated that elevation/elevation gain and difficulty level would have the highest impact on traffic estimates and therefore wanted to focus on those. In hindsight I wish I had found a data set that had the distances from each to Denver as I think that would have a high impact on the popularity. From living in Colorado I remember Mt. Bierstadt being a popular peak because of its accessibility from Denver and it being the 'shortest' 14ner. This also made it the most accessible for people visiting from out of state as it is closer to the airport in Denver and for people not used to the elevation. It also would have been interesting to look at trends for each season as not many people climb in the winter or fall.\n\nMt. Bierstadt did prove to be the most popular 14ner to climb in 2017 according to the high traffic estimate. When looking at the 20 most popular 14ner’s in 2017 they were all below the ‘Hard Class 3’ difficulty range according to the bar plot. Most of them were close together and closer to Denver, except for Handles peak in the southwest region of Colorado according to the map plot. And compared to the other 14ner’s, they had less elevation gain on the hike according to the ternary plot.\n\nA column plot, map, and ternary plot were used to visualize this dataset. These plots were selected because it is important to see where the peaks are located in relation to each other and in relation to major cities (Denver). The bar plot is an easy to read visual representation to view high traffic for each 14ner. I chose to do a ternary plot as well because I wanted to try an advanced plot.\n\nThe titles and axis labels were changed for all of the plots along with an annotation and the axis tick changes on the map. The themes and palettes were changed to match so I only had to have one legend on the infographic and it would be easier to interpret all the plots together. The color palette I chose was a national park themed for crater lake. I tried to keep the plots as simple as possible so there wasn’t too much repeating information on the infographic. My primary message was to look at difficulty and elevation gain for the most popular hikes and I found that the hikes that were of lower elevation and lower difficulty were more popular. This makes sense to me because they are more accessible for a larger group of people. The plots I made were for a general audience and I think they would be understood by most people. I added the theme_bvbw() so that the ternary plot would be easier to read with added arrows to signify the direction of each variable's proportions.\n\n## References:\n\n#### Photos:\n\n<https://www.14ers.com/route.php?route=bier1>\n\n<https://topographiadesign.com/products/pikes-peak-colorado-topographic-print?variant=32432336175244>\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}